# Currency check project

![node-version](https://img.shields.io/badge/license-mit-blue)
![npm-version](https://img.shields.io/badge/npm-6.10.0-red) 
![node-version](https://img.shields.io/badge/node-12.7.0-green)

üí∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç—ã


<div align="center">
<img src="https://swenlii.github.io/img/projects/curr-project.png" width="700px">
</div>

## ‚ö° –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞.

**–ì–æ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** 2019 –≥–æ–¥

**–°—Ç–µ–∫:** ‚óè Node.js ‚óè Express ‚óè JavaScript ‚óè JSON ‚óè node-binance-api ‚óè node-telegram-bot-api

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤–∞–ª—é—Ç–Ω—ã–µ –ø–∞—Ä—ã, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö —Ü–µ–Ω—ã, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏—è –≤–∞–ª—é—Ç—ã —á–µ—Ä–µ–∑ binance –∏ —Å–æ–æ–±—â–∞–µ—Ç –æ –Ω—É–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Ç–µ–ª–µ–≥—Ä–∞–º –∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–æ—Å—Ç –∏ –ø–∞–¥–µ–Ω–∏–µ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç (–∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö). 

## üí° –ò–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞.

–õ—ë–≥–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–∞—à–µ–π –ª—é–±–∏–º–æ–π –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ç–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞–∫ —Ä–æ—Å—Ç –∏ –ø–∞–¥–µ–Ω–∏–µ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–≤—Å—ë –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è:

- –ï—Å–ª–∏ –≤–∞–ª—é—Ç–∞ —É–ø–∞–ª–∞ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 4% –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç, —ç—Ç–æ —Å–æ–æ–±—â–∏—Ç—Å—è –≤ —Ç–µ–ª–µ–≥—Ä–∞–º (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)
- –ï—Å–ª–∏ –≤–∞–ª—é—Ç–∞ –ø–æ–¥–Ω—è–ª–∞—Å—å –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 2% –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–∏–Ω—É—Ç—ã, —ç—Ç–æ —Å–æ–æ–±—â–∏—Ç—Å—è –≤ —Ç–µ–ª–µ–≥—Ä–∞–º (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å).

–¢–∞–∫ –∂–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (*bid price*).

# üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞.

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∑–∞–ø—É—Å–∫–∞:
- –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –í–°–ï–• –≤–∞–ª—é—Ç–Ω—ã—Ö –ø–∞—Ä —Ä–∞–∑ –≤ 20 —Å–µ–∫—É–Ω–¥. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–∞–ª—é—Ç—ã —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `traffic`, –Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º –Ω–µ –æ—Ç—Å—ã–ª–∞–µ—Ç—Å—è. (—Ñ–∞–π–ª `curr_20_sec.js`)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤–∞–ª—é—Ç—É –ø–æ –≤–µ–±—Å–æ–∫–µ—Ç—É. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Å—Ç—ã–ª–∞–µ—Ç—Å—è –≤ —Ç–µ–ª–µ–≥—Ä–∞–º –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `traffic`. (—Ñ–∞–π–ª `curr_ws.js`)

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm install`.
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å `forever start curr_ws.js`.
4. –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö `console.log` –∑–∞–ø—É—Å—Ç–∏—Ç–µ `forever logs curr_ws.js -f`.

# ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã.
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ params.json. –ò–º–µ—é—Ç—Å—è:
- **–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: —Ö–æ—Å—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –ø–∞—Ä–æ–ª—å, –∏–º—è.
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ —Ç–µ–ª–µ–≥—Ä–∞–º**: –≤–∫–ª—é—á–∏—Ç—å –ª–∏ –±–æ—Ç–∞, api, id —á–∞—Ç–∞.
- **–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ binance**: api_key, api_secret
- **–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–º–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã**: –ø—Ä–æ—Ü–µ–Ω—Ç —Å–Ω–∏–∂–µ–Ω–∏—è, –ø–æ–≤—ã—à–µ–Ω–∏—è, –≤—Ä–µ–º—è –ø–æ–Ω–∏–∂–µ–Ω–∏—è, –ø–æ–≤—ã—à–µ–Ω–∏—è –∏ –º–∞—Å—Å–∏–≤ –≤–∞–ª—é—Ç–Ω—ã—Ö –ø–∞—Ä.

# üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–±—É—é—Ç—Å—è 3 —Ç–∞–±–ª–∏—Ü—ã:
- `prices` - —Ç–∞–±–ª–∏—Ü–∞, —Å–æ—Ö—Ä–∞–Ω—è—é—â–∞—è –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
- `history` - –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞, —Å–æ—Ö—Ä–∞–Ω—è—é—â–∞—è –ø—Ä–∏—à–µ–¥—à–∏–µ —Å binance –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ü–µ–Ω–µ –≤–º–µ—Å—Ç–µ —Å –≤—Ä–µ–º–µ–Ω–µ–º –ø—Ä–∏—Ö–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –ù–æ –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—à–µ 12 –º–∏–Ω—É—Ç —É–¥–∞–ª—è—é—Ç—Å—è (–µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–º–µ–Ω–µ–Ω—ã - —Å–∞–º–æ–µ –±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è + 2 –º–∏–Ω—É—Ç—ã).
- `traffic` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Å–æ–±—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –≤–∞–ª—é—Ç—ã (—Å–∫–∞—á–∫–∏ –≤–≤–µ—Ä—Ö –∏ –≤–Ω–∏–∑, –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∏ –≤—Ä–µ–º—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è). –≠—Ç–æ —Ç–∞–∫ –∂–µ –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞. –î–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—à–µ 1 —Å—É—Ç–æ–∫ —Å—Ç–∏—Ä–∞—é—Ç—Å—è.
## –°–æ—Å—Ç–∞–≤ —Ç–∞–±–ª–∏—Ü.
### **Prices.**
| –ü–æ–ª–µ     | –¢–∏–ø         | Null | Key | Default        |
|----------|-------------|------|-----|----------------|
| id       | int         | No   | PRI | Auto_increment |
| curr_str | varchar(10) | No   | UNI |                |
| value    | float       | No   |     | 0              |
| message  | varchar(100)| NO   |     |                |
**–ò–Ω–¥–µ–∫—Å:**
```sql
CREATE INDEX curr_str ON prices(curr_str);
```
### **History.**
| Field    | Type        | Null | Key | Default |
|----------|-------------|------|-----|---------|
| curr_str | varchar(20) | NO   |     |         |
| value    | float       | NO   |     | 0       |
| date     | datetime    | YES  | MUL | NULL    |
**–ò–Ω–¥–µ–∫—Å**
```sql
CREATE INDEX curr_and_date ON history(date, curr_str);
```

### **Traffic.**
| Field            | Type        | Null | Key | Default           | Extra             |
|------------------|-------------|------|-----|-------------------|-------------------|
| curr_str         | varchar(20) | NO   |     |                   |                   |
| old_price        | float       | NO   |     | 0                 |                   |
| new_price        | float       | NO   |     | 0                 |                   |
| traffic_new_date | datetime    | NO   | MUL | CURRENT_TIMESTAMP | DEFAULT_GENERATED |
| direction        | varchar(4)  | NO   |     | up                |                   |
**–ò–Ω–¥–µ–∫—Å**
```sql
CREATE INDEX traffic_new_date ON traffic(traffic_new_date);
```
